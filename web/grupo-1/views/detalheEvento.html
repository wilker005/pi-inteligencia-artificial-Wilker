<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evento+</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="shortcut icon" href="img/logo.svg">
    <link rel="stylesheet" type="text/css" href="css/estiloDetalheEvento.css" media="screen" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <!-- Modal Cadastro-->
    <div class="modal fade" id="cadastroModal" tabindex="-1" aria-labelledby="cadastroModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title " id="cadastroModalLabel" style="border-left: solid 4px #892CDC; padding-left: 10px">Cadastro</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Formulário de Login -->
                    <form id="cadastroForm" style="margin-left: 1.5em;margin-right:1.5em">
                        <div class="mb-3">
                            <label for="nome" class="form-label">Nome</label>
                            <input type="text" class="form-control" id="nomeCadastro" placeholder="Digite seu nome" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="emailCadastro" placeholder="Digite seu email" required>
                        </div>
                        <div class="mb-3">
                            <label for="telefone" class="form-label">Telefone</label>
                            <input type="tel" class="form-control" id="telefoneCadastro" placeholder="(XX) XXXXX-XXXX" required>
                        </div>
                        <div class="mb-3">
                            <label for="cpf" class="form-label">CPF</label>
                            <input type="text" class="form-control" id="cpfCadastro" placeholder="Digite seu CPF" required>
                        </div>
                        <div class="mb-3">
                            <label for="cpf" class="form-label">Senha</label>
                            <input type="password" class="form-control" id="senhaCadastro" placeholder="Crie uma senha" required>
                            <ul class="feedback-list mt-2" id="passwordFeedback">
                                <li id="length" class="invalid">
                                    <span><i class="bi bi-x-circle-fill"></i></span> Pelo menos 8 caracteres
                                </li>
                                <li id="uppercase" class="invalid">
                                    <span><i class="bi bi-x-circle-fill"></i></span> Pelo menos 1 letra maiúscula
                                </li>
                                <li id="lowercase" class="invalid">
                                    <span><i class="bi bi-x-circle-fill"></i></span> Pelo menos 1 letra minúscula
                                </li>
                                <li id="number" class="invalid">
                                    <span><i class="bi bi-x-circle-fill"></i></span> Pelo menos 1 número
                                </li>
                                <li id="special" class="invalid">
                                    <span><i class="bi bi-x-circle-fill"></i></span> Pelo menos 1 caractere especial (@, #, !, ., etc.)
                                </li>
                            </ul>
                        </div>
                        <button id="registerButton" type="button" class="btn btn-primary w-100" style="border-radius: 2em; background-color: #892CDC; border: none">
        Cadastrar
    </button>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal Login-->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title " id="loginModalLabel" style="border-left: solid 4px #892CDC; padding-left: 10px">Entrar</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Formulário de Login -->
                    <form id="loginForm" style="margin-left: 1.5em;margin-right:1.5em">
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="emailLogin" placeholder="Digite seu email" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Senha</label>
                            <input type="password" class="form-control" id="passwordLogin" placeholder="Digite sua senha" required>
                        </div>
                        <button id="registerButton" type="button" class="btn btn-primary w-100" style="border-radius: 2em; background-color: #892CDC; border: none" onclick="registerUser(event)" data-bs-dismiss="modal">
                            Cadastrar
                            </button>
                        <br>
                        <button type="button" class="btn  w-100" style="border-radius: 2em; border: none" style="margin-top: 1em;background-color: none" data-bs-target="#cadastroModal" data-bs-toggle="modal">Usuário novo? Cadastre-se aqui</button>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <!-- navbar -->
    <header class="p-3 shadow">
        <div class="container-fluid">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <div id="logo">
                    <a href="index.html" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none col-xl-3">
                        <img src="img/evento+2.svg" alt="" style="width: 150px;" class="me-5">
                    </a>
                </div>
                <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3 col-xl-6" role="search">
                    <!-- <div style="position: relative;">
                        <a href="#">
                        <img src="img/icon-search.svg" alt="" style="position: absolute; right: 0; margin-top:0.5%; margin-right: 0.5%;">
                        </a>
                    </div> -->
                    <input type="search" class="form-control barraPesquisa" placeholder="Evento..." aria-label="Search">

                </form>

                <div class="text-center">
                    <div class="row">
                        <div class="col">
                            <button type="button" id="userButton" class="btn   btnEntrarCadastrar" data-bs-target="#loginModal" data-bs-toggle="modal" style="font-size: 0.9em;">Entrar | Cadastrar</button>
                            <button type="button" id="cadastrarEventoButton" class="btn btn-primary" onclick="verificarLogin();" style="border-radius: 20px;background-color:#892CDC;border:none;">Cadastrar Evento</button>
                        </div>
                    </div>
                </div>
            </div>
    </header>

    <div id="detalhesContainer" class="container-fluid">

        <div class="container-fluid">
            <div class="row">
                <div class="col-2">
                    <button class="btn" onclick="voltarPaginaAnterior()" style="color: #892CDC;margin-top:10px"><b>Voltar</b></button>
                </div>
            </div>
            <div class="row">
                <div class="image-container" style="width: 100%;max-height: 300px;overflow: hidden;">
                    <div class="col-12"><img src="" alt="" class="" style="width: 100%;width: 100%;height: auto;object-fit: contain;object-position: center;margin-top : 20px;border-radius:20px"></div>
                </div>
            </div>
            <div class="row">

                <div class="col-xl-2 col-6 ">
                    <p class="categoria" style="margin-top: 20px; padding:10px;background-color:#D3BCF6;width:150px;border-radius:20px;color:#892CDC;text-align: center"><b># </b><b id="categoria"></b></p>
                </div>
                <div class="organizador col-6 col-xl-2 offset-xl-8">
                    <br>
                    <h6><b>Organizado por </b><strong id="organizador" style="color: #892CDC;"></strong></h6>
                </div>
            </div>
            <div class=" row ">
                <div class="col-8 col-xl-6 nomeEvento " style="margin-top: 10px; font-size:30px "><b>Nome evento</b></div>
                <div class="col-4 col-xl-2 offset-xl-4 preco ">
                    <h6 class=" " style="color:#892CDC;margin-top:5px "><strong style="font-size:1.0em;color:black ">R$ </strong><b style="font-size:2.5em ">${evento.preco}</b></h6>
                </div>
                <div class="col-12 loc" style="font-size: 5px;color:gray">
                    <h5><b id="endereco">endereco</b><b>, </b><b id="numero"></b><b> - </b><b id="bairro"></b><b>, </b><b id="cidade"></b></h5>
                </div>
            </div>

            <div class="row ">
                <div class="col-12 descricao " style="margin-top: 10px; font-size:20px ">Descrição</div>
            </div>
            <br>
            <div class="row ">
                <div class="col-12 dataHora " style="margin-top: 10px; font-size:20px ">
                    <div class="row">
                        <div class="col-xl-1 col-6">
                            <h4 id="data">data</h4>
                        </div>
                        |
                        <div class="col-xl-1 col-5">
                            <h4 id="hora">hora</h4>
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-12 col-xl-3" style="border-left: #892CDC solid 2px;">
                    <label for="">Link do site</label>
                    <input type="text" id="eventLink" value="https://www.example.com/evento123" class="form-control" readonly style="border-radius: 0px;border: none; background-color:aliceblue">
                </div>
            </div>
            <br>
            <div class="row">
                <a href="" id="linkSite" style="padding:10px;background-color:#892CDC;width: 200px;color: white;text-decoration:none;text-align:center;border-radius:20px" target="_blank"><b>Acessar Site</b></a>
                <button class="btn" id="linkSite" style="padding:10px;width: 10%;color: white;text-decoration:none;text-align:center;border-radius:20px; margin-left:10px;border: solid 2px #892CDC" onclick="copiarLink()" alt="Copiar"><b><i class="bi bi-copy" style="color: #892CDC;"></i></b></button>
            </div>
        </div>
    </div>

    <br>
    <br>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js "></script>
    <!-- <script src="grupo-1\frontend.js "></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js "></script>



    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const userButton = document.getElementById("userButton");

            // Função para verificar login
            window.verificarLogin = function() {
                if (userButton.classList.contains("btnLogado")) {
                    // Usuário está logado, redireciona para a página de criação do evento
                    window.location.href = "cadastroEvento.html"; // Substitua pelo caminho da sua página
                } else {
                    // Usuário não está logado, exibe uma mensagem
                    alert("Você precisa logar para cadastrar um evento.");
                }
            };

        });

        function recarregar() {
            // Opcional: Remover informações do usuário
            console.log("Usuário deslogado!");

            // Recarregar a página
            location.reload();
        }

        function voltarPaginaAnterior() {
            const ultimaPagina = document.referrer; // Obtém o URL da página anterior
            if (ultimaPagina) {
                window.location.href = ultimaPagina; // Redireciona para a página anterior
            } else {
                alert("Não foi possível determinar a página anterior.");
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Captura o parâmetro `id` da query string
            const params = new URLSearchParams(window.location.search);
            const eventId = params.get('id'); // Captura o ID do evento
            console.log('ID capturado:', eventId); // Para depuração

            if (eventId) {
                // Fazer chamada para a API
                const url = `http://localhost:3001/eventos/${eventId}`;
                console.log('URL da API:', url); // Depuração para ver se a URL da API está correta

                fetch(url)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Erro na API: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(evento => {
                        console.log('Evento recebido da API:', evento); // Log do evento retornado pela API

                        function formatarDataParaBrasileiro(dataAmericana) {
                            const [ano, mes, dia] = dataAmericana.split('-');
                            return `${dia}/${mes}/${ano}`;
                        }

                        // Exemplo de uso:
                        const dataAmericana = evento.dataInicio;
                        const dataBrasileira = formatarDataParaBrasileiro(dataAmericana);
                        console.log(dataBrasileira);
                        // Preenche os detalhes do evento no HTML
                        document.querySelector('.image-container img').src = evento.urlLogo || 'default-image.jpg';
                        document.querySelector('.image-container img').alt = evento.nomeEvento || 'Imagem do Evento';

                        document.querySelector('.nomeEvento b').innerText = evento.nomeEvento || 'Nome não disponível';
                        document.querySelector('.preco h6 b').innerText = evento.preco || '0,00';
                        document.querySelector('.descricao').innerText = evento.descricao || 'Descricao não disponível';
                        document.querySelector('#organizador').innerText = evento.nomeOrganizador || 'Descricao não disponível';
                        document.querySelector('#categoria').innerText = evento.categorias || 'categoria não disponível';
                        document.querySelector('#data').innerText = dataBrasileira || 'dataInicio não disponível';
                        document.querySelector('#hora').innerText = evento.horario || 'hora não disponível';
                        document.querySelector('#linkSite').href = evento.urlSite || 'Site não disponível';
                        document.querySelector('#eventLink').value = evento.urlSite || 'Site não disponível';
                        document.querySelector('.loc #endereco').innerText = evento.endereco || 'enedereço não disponível';
                        document.querySelector('.loc #cidade').innerText = evento.cidade || 'cidade não disponível';
                        document.querySelector('.loc #bairro').innerText = evento.bairro || 'bairro não disponível';
                        document.querySelector('.loc #numero').innerText = evento.numero || 'numero não disponível';

                    })
                    .catch(error => {
                        console.error('Erro ao buscar os detalhes do evento:', error);
                        document.querySelector('.container-fluid').innerHTML = '<p>Erro ao carregar os detalhes do evento.</p>';
                    });
            } else {
                console.error('ID do evento não encontrado na URL.');
            }
        });

        function copiarLink() {
            const link = document.getElementById('eventLink');
            link.select();
            link.setSelectionRange(0, 99999); // Para dispositivos móveis
            document.execCommand('copy');
            alert('Link copiado: ' + link.value);
        }

        // Envio do formulário de cadastro
        async function registerUser(event) {
            event.preventDefault(); // Evita o recarregamento da página

            const nome = document.getElementById("nomeCadastro ").value;
            const email = document.getElementById("emailCadastro ").value;
            const telefone = document.getElementById("telefoneCadastro ").value;
            const cpf = document.getElementById("cpfCadastro ").value;
            const senha = document.getElementById("senhaCadastro ").value;

            const payload = {
                nome,
                email,
                telefone,
                cpf,
                senha
            };

            try {
                const response = await fetch("http://localhost:3001/signup ", {
                    method: "POST ",
                    headers: {
                        "Content-Type ": "application/json ",
                    },
                    body: JSON.stringify(payload),
                });

                if (response.ok) {
                    const data = await response.json();
                    alert("Cadastro realizado com sucesso! ");
                    console.log("Resposta do servidor: ", data);
                } else {
                    const error = await response.json();
                    alert("Erro no cadastro: " + error.message);
                }
            } catch (error) {
                console.error("Erro ao enviar o cadastro: ", error);
                alert("Erro no servidor. Tente novamente mais tarde. ");
            }
        }

        // Envio do formulário de login
        async function loginUser(event) {
            event.preventDefault();
            const email = document.getElementById("emailLogin").value;
            const senha = document.getElementById("passwordLogin").value;
            const payload = {
                email,
                senha
            };
            try {
                const response = await fetch("http://localhost:3001/login", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(payload),
                });
                if (response.ok) {
                    const user = await response.json();
                    console.log("Resposta da API:", user); // Verifica a estrutura da resposta

                    alert("Login bem-sucedido!");

                    // Armazena o token no localStorage
                    localStorage.setItem("token", user.token);
                    localStorage.setItem("nomeUsuario", user.nome);

                    if (user && user.nome) {
                        const userButton = document.getElementById("userButton");
                        userButton.textContent = user.nome; // Atualiza o texto do botão
                        userButton.classList.remove("btnEntrarCadastrar");
                        userButton.classList.add("btnLogado");
                        userButton.setAttribute("data-bs-target", "#logoutModal"); // Define o alvo do modal de deslogar
                        userButton.setAttribute("data-bs-toggle", "modal"); // Configura o modal


                    } else {
                        alert("Erro no login: nome do usuário não encontrado.");
                    }
                } else {
                    const error = await response.text();
                    alert("Erro no login: " + error);
                }
            } catch (error) {
                console.error("Erro ao enviar o login:", error);
                alert("Erro no servidor. Tente novamente mais tarde.");
            }
        }
        async function logoutUser() {
            localStorage.removeItem("token");
            alert("Você foi deslogado.");
            location.reload(); // Recarrega a página para redefinir o estado da aplicação
        }


        // Adicionar os event listeners aos botões dos formulários
        document.querySelector("#cadastroForm button ").addEventListener("click ", registerUser);
        document.querySelector("#loginForm button ").addEventListener("click ", loginUser);


        // Máscara para telefone
        const telefoneInput = document.getElementById('telefoneCadastro');
        telefoneInput.addEventListener('input', () => {
            let telefone = telefoneInput.value.replace(/\D/g, '');
            telefone = telefone.replace(/^(\d{2})(\d)/g, '($1) $2');
            telefone = telefone.replace(/(\d{5})(\d)/, '$1-$2');
            telefoneInput.value = telefone;
        });

        // Máscara para CPF
        const cpfInput = document.getElementById('cpfCadastro');
        cpfInput.addEventListener('input', () => {
            let cpf = cpfInput.value.replace(/\D/g, '');
            cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2');
            cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2');
            cpf = cpf.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            cpfInput.value = cpf;
        });

        // Validação de CPF
        function validarCPF(cpf) {
            cpf = cpf.replace(/\D/g, '');
            if (cpf.length !== 11 || /^(\d)\1+$/.test(cpf)) return false;

            let soma = 0;
            for (let i = 0; i < 9; i++) soma += parseInt(cpf.charAt(i)) * (10 - i);
            let resto = (soma * 10) % 11;
            if (resto === 10 || resto === 11) resto = 0;
            if (resto !== parseInt(cpf.charAt(9))) return false;

            soma = 0;
            for (let i = 0; i < 10; i++) soma += parseInt(cpf.charAt(i)) * (11 - i);
            resto = (soma * 10) % 11;
            if (resto === 10 || resto === 11) resto = 0;
            return resto === parseInt(cpf.charAt(10));
        }
        const senhaInput = document.getElementById("senhaCadastro ");
        const feedbackItems = {
            length: document.getElementById("length "),
            uppercase: document.getElementById("uppercase "),
            lowercase: document.getElementById("lowercase "),
            number: document.getElementById("number "),
            special: document.getElementById("special ")
        };

        senhaInput.addEventListener("input ", () => {
            const senha = senhaInput.value;

            // Verifica as condições
            const isLengthValid = senha.length >= 8;
            const hasUppercase = /[A-Z]/.test(senha);
            const hasLowercase = /[a-z]/.test(senha);
            const hasNumber = /\d/.test(senha);
            const hasSpecial = /[@$!%*?&.]/.test(senha);

            // Atualiza a interface
            updateFeedback(feedbackItems.length, isLengthValid);
            updateFeedback(feedbackItems.uppercase, hasUppercase);
            updateFeedback(feedbackItems.lowercase, hasLowercase);
            updateFeedback(feedbackItems.number, hasNumber);
            updateFeedback(feedbackItems.special, hasSpecial);
        });


        // Atualiza o estado visual dos itens de feedback
        function updateFeedback(element, isValid) {
            const icon = element.querySelector("i ");
            if (isValid) {
                element.classList.remove("invalid ");
                element.classList.add("valid ");
                icon.classList.remove("bi-x-circle-fill ");
                icon.classList.add("bi-check-circle-fill ");
            } else {
                element.classList.remove("valid ");
                element.classList.add("invalid ");
                icon.classList.remove("bi-check-circle-fill ");
                icon.classList.add("bi-x-circle-fill ");
            }
        }


        document.addEventListener("DOMContentLoaded ", () => {
            const senhaInput = document.getElementById("senhaCadastro ");
            const feedbackItems = {
                length: document.getElementById("length "),
                uppercase: document.getElementById("uppercase "),
                lowercase: document.getElementById("lowercase "),
                number: document.getElementById("number "),
                special: document.getElementById("special ")
            };
            const cadastrarButton = document.getElementById("cadastrarButton ");

            // Validação em tempo real
            senhaInput.addEventListener("input ", () => {
                const senha = senhaInput.value;
                const validacoes = {
                    length: senha.length >= 8,
                    uppercase: /[A-Z]/.test(senha),
                    lowercase: /[a-z]/.test(senha),
                    number: /\d/.test(senha),
                    special: /[!@#$%^&*(),.?":{}|<>]/.test(senha)
                }; // Atualizar o feedback visual for (const [key, isValid] of Object.entries(validacoes)) { feedbackItems[key].classList.toggle("invalid", !isValid); feedbackItems[key].classList.toggle("valid", isValid); } // Habilitar
                const todasValidacoesAtendidas = Object.values(validacoes).every(Boolean);
                cadastrarButton.disabled = !todasValidacoesAtendidas;
            });
        });
    </script>
    <script>
        // Script para tratar o evento de envio do formulário
        document.getElementById("loginForm").addEventListener("submit", function(e) {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            alert(`Email: ${email}\nSenha: ${password}`);
            // Aqui você pode implementar a lógica de autenticação (chamada à API, por exemplo).
        });
    </script>


    <!-- JavaScript -->
    <script>
        document.getElementById("registerButton").addEventListener("click", (event) => {
            registerUser(event); // Chama a função de cadastro
        });

        // Adicionar o evento ao botão após o carregamento do DOM
        document.addEventListener("DOMContentLoaded", () => {
            const registerButton = document.getElementById("registerButton");
            if (registerButton) {
                registerButton.addEventListener("click", registerUser);
            }
        });

        // Função de cadastro do usuário
        async function registerUser(event) {
            event.preventDefault(); // Evitar o recarregamento da página

            // Capturar os valores do formulário
            const nome = document.getElementById("nomeCadastro").value.trim();
            const email = document.getElementById("emailCadastro").value.trim();
            const senha = document.getElementById("senhaCadastro").value.trim();
            const cpf = document.getElementById("cpfCadastro").value.trim();
            const telefone = document.getElementById("telefoneCadastro").value.trim();

            // Validação básica dos campos
            if (!nome || !email || !senha || !cpf || !telefone) {
                alert("Por favor, preencha todos os campos obrigatórios.");
                return;
            }

            try {
                // Desabilitar botão de envio (se houver)
                const submitButton = document.getElementById("registerButton");
                if (submitButton) submitButton.disabled = true;

                const response = await fetch(`${API_BASE_URL}/signup`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        nome,
                        email,
                        senha,
                        cpf,
                        telefone
                    })
                });

                const result = await response.json();

                if (response.ok) {
                    alert(result.message || "Usuário cadastrado com sucesso!");
                    document.getElementById("cadastroForm").reset(); // Limpar o formulário
                } else {
                    alert(result.message || "Erro ao cadastrar usuário.");
                }
            } catch (error) {
                console.error("Erro:", error);
                alert("Erro ao cadastrar usuário. Tente novamente mais tarde.");
            } finally {
                // Reativar botão de envio (se houver)
                const submitButton = document.getElementById("registerButton");
                if (submitButton) submitButton.disabled = false;
            }
        }


        // Associar a função de cadastro ao formulário
        document.getElementById("cadastroForm").addEventListener("submit", registerUser);

        // Função de cadastro de usuário
        // Função de cadastro de usuário
        async function registerUser(event) {
            event.preventDefault(); // Evitar recarregar a página

            // Capturar os valores do formulário
            const nome = document.getElementById("nomeCadastro").value.trim();
            const email = document.getElementById("emailCadastro").value.trim();
            const senha = document.getElementById("senhaCadastro").value.trim();
            const cpf = document.getElementById("cpfCadastro").value.trim();
            const telefone = document.getElementById("telefoneCadastro").value.trim();

            // Validação básica dos campos
            if (!nome || !email || !senha || !cpf || !telefone) {
                alert("Por favor, preencha todos os campos obrigatórios.");
                return;
            }

            try {
                // Desabilitar botão de envio (se houver)
                const submitButton = document.getElementById("submitButton");
                if (submitButton) submitButton.disabled = true;

                const response = await fetch(`${API_BASE_URL}/signup`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        nome,
                        email,
                        senha,
                        cpf,
                        telefone
                    })
                });

                const result = await response.json();

                if (response.ok) {
                    alert(result.message || "Usuário cadastrado com sucesso!");
                    document.getElementById("cadastroForm").reset(); // Limpar o formulário
                } else {
                    alert(result.message || "Erro ao cadastrar usuário.");
                }
            } catch (error) {
                console.error('Erro:', error);
                alert("Erro ao cadastrar usuário. Tente novamente mais tarde.");
            } finally {
                // Reativar botão de envio (se houver)
                if (submitButton) submitButton.disabled = false;
            }
        }
    </script>
</body>

</html>